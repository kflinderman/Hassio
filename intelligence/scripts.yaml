##############################
# Jump to Section            #
#                            #
# #0 Location Scripts        #
# #1 PC Scripts              #
# #2 Temperature Scripts     #
# #3 Manual Call Scripts     #
# #4 Other Scripts           #
# #5 Random Vacation Scripts #
# #6 Stereo Scripts          #
##############################

#####################
#0 Location Scripts #
#####################

home_mode:
  sequence:
    - condition: state
      entity_id: input_boolean.window
      state: 'off'
    - service: script.turn_on
      entity_id: script.home_mode_check1
    - condition: time
      weekday:
          - mon
          - tue
          - wed
          - thu
          - fri
    - condition: time
      after: '9:00:00'
      before: '16:30:00'
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: 'home'
        
home_mode_check1:
  sequence:
    - service: script.turn_on
      entity_id: script.home_mode_check2
    - condition: time
      weekday:
          - mon
          - tue
          - wed
          - thu
          - fri
    - condition: time
      after: '16:30:00'
      before: '9:00:00'
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: None
        
home_mode_check2:
  sequence:
    - condition: time
      weekday:
          - sat
          - sun
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: None
        
away_mode:
  sequence:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.all_firstfloor
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.all_secondfloor
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.all_basement
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.all_outside
    - condition: state
      entity_id: input_boolean.window
      state: 'off'
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: 'away'

###############
#1 PC Scripts #
###############

cpu_off:
  sequence:
    - service: script.turn_on
      entity_id: script.lightpack_off
    - delay:
        minutes: 1
    - service: hassio.addon_stdin
      data:
        addon: core_rpc_shutdown
        input: Desktop-Shutdown
      
lightpack_off:
  sequence:
    - service: light.turn_off
      data:
        entity_id: light.lightpack
      
after_dark:
  sequence:
    - service: light.turn_on
      entity_id: light.lightpack
    - service: switch.turn_off
      entity_id: switch.officefan
      
timed_cpu_off:
  sequence:
    - delay:
        minutes: 5
    - condition: state
      entity_id: person.kenny
      state: not_home
    - service: script.turn_on
      entity_id: script.cpu_off
        
########################
#2 Temperature Scripts #
########################
        
windows_open:
  sequence:
    - service: climate.set_temperature
      data:
        entity_id: climate.main_floor
        target_temp_high: 85
        target_temp_low: 60
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.window
        
vacation_temp:
  sequence:
    - service: climate.set_temperature
      data:
        entity_id: climate.main_floor
        target_temp_high: 200
        target_temp_low: 60
        
wakeup_temp:
  sequence:
    - service: climate.set_temperature
      data:
        entity_id: climate.main_floor
        target_temp_high: 77
        target_temp_low: 72
                
party_temp:
  sequence:
    - service: climate.set_temperature
      data:
        entity_id: climate.main_floor
        target_temp_high: 71
        target_temp_low: 66
        
climate_reset:
  sequence:
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: None
        
ecobee_reset:
  sequence:
    - delay:
        seconds: 30
    - service: climate.set_hold_mode
      data:
        entity_id: climate.main_floor
        hold_mode: None

########################
#3 Manual Call Scripts #
########################
        
movie_time:
  sequence:
    - service: light.turn_off
      entity_id: light.chair_lamp
    - service: light.turn_off
      entity_id: light.dining_lights_level
    - service: homeassistant.turn_off
      entity_id: group.kitchen
    - service: light.turn_on
      entity_id: light.rock_lamp
      data:
        brightness: 64
    - service: scene.turn_on
      entity_id: scene.red_lamp_scene
    - service: script.turn_on
      entity_id: script.netflix_watch_on
      
movie_finish:
  sequence:
    - service: light.turn_on
      entity_id: light.chair_lamp
    - service: light.turn_on
      entity_id: light.rock_lamp
      data:
        brightness: 255
    - service: scene.turn_on
      entity_id: scene.normal_lamp_scene
    - service: light.turn_on
      entity_id: light.floor_lamp
      data:
        brightness: 255
        
dinner_time:
  sequence:
    - service: switch.turn_off
      entity_id: switch.kitchensw
    - service: homeassistant.turn_off
      entity_id: group.livingroom
    - service: light.turn_on
      entity_id: light.oven
      data:
        brightness: 25
    - service: light.turn_on
      entity_id: light.dining_lights_level
      data:
        brightness: 75
      
game_on:
  alias: "Game On"
  sequence:
    - service: scene.turn_on
      entity_id: scene.fun_basement
    - delay:
        seconds: 2
    - service: light.turn_on
      entity_id: light.basement_left
      data:
        brightness: 255
    - service: light.turn_off
      entity_id: light.basement_left
    - service: light.turn_on
      entity_id: light.basement_right
      data:
        brightness: 255
    - service: light.turn_off
      entity_id: light.basement_right
    - service: light.turn_on
      entity_id: light.basement_left
    - service: light.turn_off
      entity_id: light.basement_left
    - service: light.turn_on
      entity_id: light.basement_right
    - service: light.turn_off
      entity_id: light.basement_right
    - delay:
        seconds: 1
    - service: switch.turn_on
      entity_id: switch.airhockey
    - service: scene.turn_on
      entity_id: scene.fun_basement_2
        
##################
#4 Other Scripts #
##################
sunset_switch:
  sequence:
    - delay:
        minutes: 30
    - service: switch.turn_on
      entity_id: switch.kitchensw
    - service: homeassistant.turn_on
      entity_id: group.holiday
    - service: light.turn_on
      entity_id: light.dining_lights_level
    - condition: state
      entity_id: input_boolean.visitor
      state: 'on'
    - service: switch.turn_on
      entity_id: switch.guestbed
        
goodnight_kenny:
  sequence:
    - service: switch.turn_on
      entity_id: switch.officefan
    - delay:
        minutes: 2
    - service: switch.turn_off
      entity_id: switch.officefan
      
door:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.door
    - delay:
        minutes: 5
    - service: input_boolean.turn_off
      entity_id: input_boolean.door
        
first_floor_break:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_break
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_firstfloor
    - service: input_boolean.turn_off
      entity_id: input_boolean.all_break
        
second_floor_break:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_break
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_secondfloor
    - service: input_boolean.turn_off
      entity_id: input_boolean.all_break
      
basement_floor_break:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_break
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_basement
    - service: input_boolean.turn_off
      entity_id: input_boolean.all_break
      
outside_break:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_break
    - service: input_boolean.turn_on
      entity_id: input_boolean.all_outside
    - service: input_boolean.turn_off
      entity_id: input_boolean.all_break
      
bedroom_off:
  sequence:
    - delay:
        minutes: 5
    - condition: numeric_state
      entity_id: sensor.bedroom_multisensor_burglar
      below: 4 
    - service: input_boolean.turn_on
      entity_id: input_boolean.bedroom_motion
    - delay:
        seconds: 2
    - service: homeassistant.turn_off
      entity_id: group.bedroom
    - delay:
        seconds: 2
    - service: input_boolean.turn_off
      entity_id: input_boolean.bedroom_motion
      
kitchen_off:
  sequence:
    - delay:
        minutes: 5
    - condition: numeric_state
      entity_id: sensor.kitchen_burglar
      below: 4 
    - service: input_boolean.turn_on
      entity_id: input_boolean.kitchen_motion
    - delay:
        seconds: 2
    - service: homeassistant.turn_off
      entity_id: group.kitchen
    - delay:
        seconds: 2
    - service: input_boolean.turn_off
      entity_id: input_boolean.kitchen_motion
      
basement_off:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.basement_motion
    - delay:
        seconds: 2
    - service: homeassistant.turn_off
      entity_id: group.basement
    - delay:
        seconds: 2
    - service: input_boolean.turn_off
      entity_id: input_boolean.basement_motion

livingroom_off:
  sequence:
    - service: input_boolean.turn_on
      entity_id: input_boolean.livingroom_motion
    - delay:
        seconds: 2
    - service: light.turn_off
      entity_id: group.livingroom
    - delay:
        seconds: 2
    - service: input_boolean.turn_off
      entity_id: input_boolean.livingroom_motion
      
basement_check:
  sequence:
    - service: light.turn_off
      entity_id: light.basement_ceiling_lights
    - delay:
        minutes: 2
    - service: script.turn_on
      entity_id: script.basement_loop
      
basement_loop:
  sequence:
    - condition: state
      entity_id: light.basement_ceiling_lights
      state: 'on'
    - service: script.turn_on
      entity_id: script.basement_check
      
medications:
  sequence:
    - service: notify.pushbullet
      data:
        title: Alli Needs Her Meds
        message: "Make sure to give Alli her meds for the month!"
    - service: script.turn_on
      data:
        entity_id: script.medications_loop
        
medications_loop:
  sequence:
    - delay:
        days: 1
    - condition: state
      entity_id: input_boolean.dog_med
      state: 'off'
    - service: script.turn_on
      data:
        entity_id: script.medications
      
alli_location_spreadsheet:
  sequence:
    - condition: state
      entity_id: group.alli_locate
      state: 'on'
    - service: ifttt.trigger
      data_template: {"event":"Alli_Location", "value1":"{{ states.sensor.alli_spreadsheet.state }}", "value2":"{{ states.sensor.alli_location.state }}", "value3":"{{ states.sensor.basement_alli_signal.state }}, {{ states.sensor.bedroom_alli_signal.state }}, {{ states.sensor.living_room_alli_signal.state }}, {{ states.sensor.office_alli_signal.state }}"}
    - service: script.turn_on
      data:
        entity_id: script.alli_location_spreadsheet_loop
    
alli_location_spreadsheet_loop:
  sequence:
    - delay:
        seconds: 30
    - service: script.turn_on
      data:
        entity_id: script.alli_location_spreadsheet
      
############################
#5 Random Vacation Scripts #
############################

rand_vac1:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 0
    - service: script.turn_on
      data:
        entity_id: script.rand_vac2
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 2
    - service: script.turn_on
      data:
        entity_id: script.vac_living
    - service: script.turn_on
      data:
        entity_id: script.vac_bed

rand_vac2:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 1
    - service: script.turn_on
      data:
        entity_id: script.rand_vac3
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 3
    - service: script.turn_on
      data:
        entity_id: script.vac_living
    - service: script.turn_on
      data:
        entity_id: script.vac_office

rand_vac3:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 2
    - service: script.turn_on
      data:
        entity_id: script.rand_vac4
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 4
    - service: script.turn_on
      data:
        entity_id: script.vac_living
    - service: script.turn_on
      data:
        entity_id: script.vac_craft

rand_vac4:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 3
    - service: script.turn_on
      data:
        entity_id: script.rand_vac5
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 5
    - service: script.turn_on
      data:
        entity_id: script.vac_living

rand_vac5:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 4
    - service: script.turn_on
      data:
        entity_id: script.rand_vac6
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 6
    - service: script.turn_on
      data:
        entity_id: script.vac_bed
    - service: script.turn_on
      data:
        entity_id: script.vac_office

rand_vac6:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 5
    - service: script.turn_on
      data:
        entity_id: script.rand_vac7
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 7
    - service: script.turn_on
      data:
        entity_id: script.vac_bed
    - service: script.turn_on
      data:
        entity_id: script.vac_craft

rand_vac7:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 6
    - service: script.turn_on
      data:
        entity_id: script.rand_vac8
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 8
    - service: script.turn_on
      data:
        entity_id: script.vac_bed

rand_vac8:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 7
    - service: script.turn_on
      data:
        entity_id: script.rand_vac9
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 9
    - service: script.turn_on
      data:
        entity_id: script.vac_office
    - service: script.turn_on
      data:
        entity_id: script.vac_craft

rand_vac9:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 8
    - service: script.turn_on
      data:
        entity_id: script.rand_vac10
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      below: 10
    - service: script.turn_on
      data:
        entity_id: script.vac_office

rand_vac10:
  sequence:
    - condition: numeric_state
      entity_id: sensor.vacation_randomizer
      above: 9
    - service: script.turn_on
      data:
        entity_id: script.vac_craft
        
vac_living:
  sequence:
    - delay: '{{ (range(0, 1)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: light.turn_on
      entity_id: group.livingroom
    - delay: '{{ (range(0, 2)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: light.turn_off
      entity_id: group.livingroom

vac_bed:
  sequence:
    - delay: '{{ (range(0, 1)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: homeassistant.turn_on
      entity_id: group.bedroom
    - delay: '{{ (range(0, 2)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: homeassistant.turn_off
      entity_id: group.bedroom

vac_office:
  sequence:
    - delay: '{{ (range(0, 1)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: switch.turn_on
      entity_id: group.office
    - delay: '{{ (range(0, 2)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: switch.turn_off
      entity_id: group.office

vac_craft:
  sequence:
    - delay: '{{ (range(0, 1)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: homeassistant.turn_on
      entity_id: group.craft
    - delay: '{{ (range(0, 2)|random|int) }}:{{ (range(1, 59)|random|int) }}:00'
    - service: homeassistant.turn_off
      entity_id: group.craft
        
###################
#6 Stereo Scripts #
###################

vinyl_on:
  alias: "The Stereo Vinyl"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.vinyl_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: AUDIO5
        
vinyl_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: AUDIO5

netflix_watch_on:
  alias: "The Stereo Movies"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.netflix_watch_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: AUDIO1
        
netflix_watch_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: AUDIO1
        
cable_watch_on:
  alias: "The Stereo to Watch Cable"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.cable_watch_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI2
        
cable_watch_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI2
  
        
pandora_listen_on:
  alias: "The Stereo Music"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.pandora_listen_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: Pandora
        
pandora_listen_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: Pandora
        
radio_listen_on:
  alias: "The Stereo Radio"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.radio_listen_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: TUNER
        
radio_listen_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: TUNER
        
ps3_on:
  alias: "The PS3"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.ps3_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI5
        
ps3_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI5
        
wiiu_on:
  alias: "The Wii U"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.wiiu_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI4
        
wiiu_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI4
        
steam_on:
  alias: "Steam"
  sequence:
    - service: script.turn_on
      data:
        entity_id: script.steam_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI1
        
steam_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI1
        
switch_on:
  alias: "Switch"
  sequence:
    - service: switch.turn_on
      entity_id: switch.desktopPC
    - service: script.turn_on
      data:
        entity_id: script.switch_off
    - condition: or
      conditions:
        - condition: state
          entity_id: media_player.stereo
          state: 'on'
        - condition: state
          entity_id: media_player.stereo
          state: 'playing'
        - condition: state
          entity_id: media_player.stereo
          state: 'idle'
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI3
        
switch_off:
  sequence:
    - delay:
        seconds: 1
    - condition: state
      entity_id: media_player.stereo
      state: 'off'
    - service: media_player.turn_on
      data:
        entity_id: media_player.stereo
    - delay:
        seconds: 5
    - service: media_player.select_source
      data:
        entity_id: media_player.stereo
        source: HDMI3